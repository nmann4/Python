import numpy as np
import time

class MedianFilter:

    def __init__(self, N, D):
        self.N = N;  #Dimension of input/output
        self.D = D;  #Number of previous scans used to calculate median
        self.counter = 0; #Used to keep track of D scans
        self.inputlist = [[] for x in xrange(D+1)]
                
    def update(self, inputArray):
	
	#Replaces oldest scan in the list of D scans
        if(self.counter>self.D):
            self.counter = 0
        self.inputlist[self.counter] = inputArray
        
	#Stores values from inputList(previous D scans) 
        calc_medianlist = [[] for x in xrange(self.N)]
        for x in self.inputlist:
            for index, item in enumerate(x):
                calc_medianlist[index].append(item)

        print "Calculating Median using previous {0} scans".format(self.D)
	#print "Input: {0}".format(inputArray)
	#Delay to watch the program run when updating
	#time.sleep(3) 
	
	#Calculates Median
        medianlist = []
        for x in calc_medianlist:
            medianlist.append(np.median(x))

        medianlist = np.asfarray(medianlist)
	#print "Output: {0}".format(medianlist)
        self.counter += 1;

        return medianlist
           
        
        








        
    
